{
  "image": "${localEnv:IMAGE:mcr.microsoft.com/devcontainers/base:debian}",

  "features": {
    "ghcr.io/ptab/devcontainer-features/helix-language-server-proxy": {},
    "ghcr.io/ptab/devcontainer-features/json-language-server": {},
    "ghcr.io/ptab/devcontainer-features/yaml-language-server": {},
    "ghcr.io/ptab/devcontainer-features/bash-language-server": {},
    "ghcr.io/ptab/devcontainer-features/metals": {},
    "ghcr.io/devcontainers-extra/features/ruff": {} 
  },
  
  "runArgs": [
    "-v", "${localEnv:SSH_AUTH_SOCK}:/run/host-services/ssh-auth.sock"
  ],

  "containerEnv": {
    "SSH_AUTH_SOCK": "/run/host-services/ssh-auth.sock"
  },

  "remoteEnv": {
    "SSH_AUTH_SOCK": "/run/host-services/ssh-auth.sock"
  },
  
  "onCreateCommand": {
    "add-github-to-known-hosts": "mkdir -p ~/.ssh && curl --silent https://api.github.com/meta | jq --raw-output '\"github.com \"+.ssh_keys[]' >> ~/.ssh/known_hosts",
    "socket-permissions": "sudo chown -R vscode /run/host-services/ssh-auth.sock"
  }
}
